<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MERCIFUL CRUNCHY ‚Äî Contact</title>
  <link rel="stylesheet" href="styles/common.css" />
  <link rel="stylesheet" href="styles/contact.css" />
</head>
<body>
  <header class="site-header">
    <div class="container header-grid">
      <a class="brand" href="index.html">MERCIFUL CRUNCHY</a>
      <nav class="nav" aria-label="Main navigation">
        <a href="index.html">Shop</a>
        <a href="about.html">About</a>
        <a href="contact.html" aria-current="page">Contact</a>
        <a href="cart.html" class="cart-link">Cart (<span id="cart-count">0</span>)</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <h1>Contact Us</h1>
    <p class="page-lead">Reach out to us directly or send a message below. We'll get back to you as soon as possible.</p>

    <!-- Quick Contact Options -->
    <section class="quick-contact-section">
      <h2 class="quick-contact-heading">Get in Touch</h2>
      <div class="quick-contact-grid">
        <!-- Phone -->
        <div class="quick-contact-card">
          <h3 class="quick-contact-title contact-accent">üìû Call Us</h3>
          <p class="muted quick-contact-copy">Monday - Saturday, 8:00 AM - 10:00 PM</p>
          <a href="tel:+2349037464756" class="quick-contact-link contact-accent">+234 903 746 4756</a>
        </div>

        <!-- WhatsApp -->
        <div class="quick-contact-card">
          <h3 class="quick-contact-title whatsapp-accent">üí¨ WhatsApp</h3>
          <p class="muted quick-contact-copy">Instant messaging with quick replies</p>
          <a href="https://wa.me/2349037464756?text=Hello%20Merciful%20Crunchy%2C%20I%20would%20like%20to%20inquire%20about%20your%20products" target="_blank" rel="noopener" class="quick-contact-link whatsapp-accent">Start Chat</a>
        </div>

        <!-- Email -->
        <div class="quick-contact-card">
          <h3 class="quick-contact-title contact-accent">‚úâÔ∏è Email</h3>
          <p class="muted quick-contact-copy">Send us an email anytime</p>
          <a href="mailto:merciemaiye@gmail.com" class="quick-contact-link contact-accent email-link">merciemaiye@gmail.com</a>
        </div>
      </div>
    </section>

    <!-- Contact Form -->
    <section class="contact-form-section">
      <h2>Send us a Message</h2>
      <form id="contact-form" class="contact-form">
        <label>
          Your name <span class="required-mark">*</span>
          <input type="text" id="contact-name" required />
        </label>
        <label>
          Email <span class="required-mark">*</span>
          <input type="email" id="contact-email" required />
        </label>
        <label>
          Phone (optional)
          <input type="tel" id="contact-phone" />
        </label>
        <label>
          Message <span class="required-mark">*</span>
          <textarea id="contact-message" rows="6" required placeholder="Tell us how we can help..."></textarea>
        </label>
        <div>
          <button type="submit" class="btn-primary">Send Message</button>
        </div>
        <p id="contact-status" class="muted status-copy" role="status" aria-live="polite"></p>
      </form>
    </section>

    <!-- Business Hours & Location -->
    <section class="business-section">
      <h2 class="business-heading">Business Information</h2>
      <div class="business-grid">
        <div>
          <h3>Hours of Operation</h3>
          <ul class="hours-list">
            <li class="hours-item"><strong>Monday - Saturday:</strong> 8:00 AM - 10:00 PM</li>
            <li class="hours-item"><strong>Sunday:</strong> Closed</li>
          </ul>
        </div>
        <div>
          <h3>Location</h3>
          <p class="location-copy">
            MERCIFUL CRUNCHY<br/>
            Igbesa, Ogun State<br/>
            <a href="tel:+2349037464756">+234 903 746 4756</a>
          </p>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p class="footer-copy">&copy; <span id="year"></span> MERCIFUL CRUNCHY ‚Äî All rights reserved.</p>
      <p class="footer-copy"><a href="index.html">Shop</a> ‚Ä¢ <a href="about.html">About</a> ‚Ä¢ <a href="contact.html">Contact</a></p>
    </div>
  </footer>

  <script src="script/merciful.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Contact form handling
    const contactForm = document.getElementById('contact-form');
    if (contactForm) {
      contactForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const statusEl = document.getElementById('contact-status');
        statusEl.textContent = 'Sending message...';

        const payload = {
          name: document.getElementById('contact-name').value.trim(),
          email: document.getElementById('contact-email').value.trim(),
          phone: document.getElementById('contact-phone').value.trim(),
          message: document.getElementById('contact-message').value.trim()
        };

        try {
          const res = await fetch('http://localhost:3000/api/contact', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });
          const json = await res.json();
          if (!res.ok) throw new Error(json.error || res.statusText);
          statusEl.style.color = '#065f46';
          statusEl.textContent = '‚úì Thank you! Your message has been received. We will contact you soon.';
          contactForm.reset();
        } catch (err) {
          // Fallback: save locally
          const contacts = JSON.parse(localStorage.getItem('mc_contacts') || '[]');
          contacts.push({ ...payload, createdAt: new Date().toISOString() });
          localStorage.setItem('mc_contacts', JSON.stringify(contacts));
          statusEl.style.color = '#92400e';
          statusEl.textContent = 'Message saved locally. You are offline but we will get back to you.';
          contactForm.reset();
        }
      });
    }
  </script>
</body>
</html>
